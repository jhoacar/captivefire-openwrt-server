<?php  namespace App\Responses\Luci;use App\Responses\Forbidden;use App\Responses\Response as BaseResponse;use App\Validations\CurlValidation;use Symfony\Component\HttpFoundation\Request;use UciGraphQL\Providers\UciCommandProvider;class Response extends BaseResponse{private function isLuciRequest($request):bool{return $request->getPathInfo()==='/luci';}private function getLuciPort():int{$listen_https=UciCommandProvider::get('uhttpd','luci','listen_https');$option=explode(' ',$listen_https)[0];$scheme=explode(':',$option);return intval($scheme[count($scheme)-1]);}private function redirectToLuciApp(){if($this->request !==null){$this->headers->set('Location',$this->request->getSchemeAndHttpHost().':'.$this->getLuciPort());}return $this->setHeaders()->setStatusCode(300)->send();}public function matchRequest($request):bool{return $this->isLuciRequest($this->request=$request);}public function handleRequest(){if($this->validation ===null){$this->validation=new CurlValidation();}return $this->redirectToLuciApp();}}