<?php  namespace Symfony\Component\HttpFoundation\Session\Storage\Handler;class MemcachedSessionHandler extends AbstractSessionHandler{private $memcached;private $ttl;private $prefix;public function __construct(\Memcached $memcached,array $options=[]){$this->memcached=$memcached;if($diff=array_diff(array_keys($options),['prefix','expiretime','ttl'])){throw new \InvalidArgumentException(sprintf('The following options are not supported "%s".',implode(', ',$diff)));}$this->ttl=$options['expiretime']??$options['ttl']??null;$this->prefix=$options['prefix']??'sf2s';}public function close(){return $this->memcached->quit();}protected function doRead(string $sessionId){return $this->memcached->get($this->prefix.$sessionId)?:'';}public function updateTimestamp($sessionId,$data){$this->memcached->touch($this->prefix.$sessionId,time()+(int)($this->ttl ??\ini_get('session.gc_maxlifetime')));return true;}protected function doWrite(string $sessionId,string $data){return $this->memcached->set($this->prefix.$sessionId,$data,time()+(int)($this->ttl ??\ini_get('session.gc_maxlifetime')));}protected function doDestroy(string $sessionId){$result=$this->memcached->delete($this->prefix.$sessionId);return $result ||\Memcached::RES_NOTFOUND ==$this->memcached->getResultCode();}public function gc($maxlifetime){return 0;}protected function getMemcached(){return $this->memcached;}}